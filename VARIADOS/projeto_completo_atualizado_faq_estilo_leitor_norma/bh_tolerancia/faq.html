<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAQ ‚Äî Jornada, Intervalo e Toler√¢ncia</title>

  <!-- Reaproveita o mesmo CSS do projeto + o CSS do Leitor Digital da Norma -->
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="faq_style.css">

  <style>
    /* Ajustes m√≠nimos para rodar bem dentro do iframe/modal */
    body { background: var(--bg); }
    .container--fluid { padding-top: 18px; }
    .hero__card h2 { margin: 0 0 10px; }
    .faq-list { margin-top: 16px; display: grid; gap: 10px; }
    details.faq-item { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
    details.faq-item summary { list-style: none; cursor: pointer; padding: 14px 14px; display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    details.faq-item summary::-webkit-details-marker{ display:none; }
    .faq-q { font-weight: 700; line-height: 1.25; }
    .faq-meta { display:flex; align-items:center; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .tag-mini { font-size: .78rem; padding: 4px 10px; border-radius: 999px; border: 1px solid var(--border); background: rgba(2,132,199,.08); color: var(--brand-dark); }
    .faq-a { padding: 0 14px 14px; color: var(--text); }
    .faq-a p { margin: 10px 0; }
    .base-pills { display:flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .base-pill { border: 1px solid var(--border); background: var(--card); color: var(--text); padding: 6px 10px; border-radius: 999px; font-size: .82rem; cursor:pointer; }
    .base-pill:hover { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(2,132,199,.12); }
    .empty { display:none; margin-top: 14px; color: var(--muted); text-align:center; }
    .quick-pills.center-pills { justify-content: center; }
  </style>
</head>

<body>
  <main class="container container--fluid">
    <section class="search-section">
      <div class="card hero__card">
        <h2 style="text-align:center; font-size: 1.2rem; border:none;">FAQ interativo ‚Äî Jornada, Intervalo e Toler√¢ncia</h2>
        <p style="text-align:center; margin: 0 0 14px; color: var(--muted);">
          Use a busca e os filtros para navegar. Linguagem de reuni√£o (gestor ‚Üî empregados), com indica√ß√£o de base (Documento ‚Ä¢ Art/Cl√°usula ‚Ä¢ P√°gina).
        </p>

        <div class="search-box-wrapper">
          <input type="text" id="faqSearch" class="big-search" placeholder="Pesquisar termo... (ex.: toler√¢ncia, intervalo, banco de horas)">
          <div class="search-icon">üîç</div>
        </div>

        <!-- Pills no estilo do Leitor Digital -->
        <div class="quick-pills center-pills" id="faqTags">
          <button class="pill pill--action" data-filter="jornada" aria-pressed="true">Jornada</button>
          <button class="pill pill--action" data-filter="intervalo" aria-pressed="true">Intervalo</button>
          <button class="pill pill--action" data-filter="tolerancia" aria-pressed="true">Toler√¢ncia</button>
          <button class="pill pill--action" data-filter="ponto" aria-pressed="true">Registro/Ponto</button>
          <button class="pill pill--action" data-filter="conduta" aria-pressed="true">Conduta</button>
        </div>
      </div>

      <div id="faqList" class="faq-list"></div>
      <div id="faqEmpty" class="empty">Nenhum item encontrado com esses filtros.</div>
    </section>
  </main>

  <script>
    // =========================================================
    // Dados do FAQ (reuni√£o)
    // =========================================================
    const FAQ = [
      {
        cat: "jornada",
        q: "‚ÄúMinha jornada √© flex√≠vel? Posso entrar e sair em hor√°rios diferentes todos os dias?‚Äù",
        a: `
          <p><b>Resposta:</b> A flexibilidade n√£o √© autom√°tica nem definitiva. Depende de autoriza√ß√£o do gestor, conforme hor√°rios previamente estipulados e garantindo o funcionamento do setor.</p>
          <p><b>Orienta√ß√£o:</b> N√£o existe liberdade para o empregado definir hor√°rios de forma unilateral.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Flexibilidade (p√°g. 8)", file:"Manual.pdf", page:8 },
        ]
      },
      {
        cat: "jornada",
        q: "‚ÄúSe eu cumprir as 8 horas no dia, importa o hor√°rio que eu entrei?‚Äù",
        a: `
          <p><b>Resposta:</b> Sim. A jornada deve ser cumprida dentro do hor√°rio cadastrado/autorizado. Cumprimento fora do hor√°rio sem autoriza√ß√£o pode caracterizar desconformidade, mesmo com total di√°rio atingido.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Registro de frequ√™ncia (p√°g. 6‚Äì7)", file:"Manual.pdf", page:6 },
          { doc:"CLT", label:"CLT ‚Äî art. 58", file:"CLT.pdf", page:1 },
        ]
      },
      {
        cat: "intervalo",
        q: "‚ÄúPosso reduzir meu intervalo para sair mais cedo?‚Äù",
        a: `
          <p><b>Resposta:</b> N√£o. √â vedado compensar atrasos/sa√≠das antecipadas reduzindo o intervalo intrajornada. O intervalo √© regra prevista na CLT e no normativo interno.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Observa√ß√µes importantes (p√°g. 9)", file:"Manual.pdf", page:9 },
        ]
      },
      {
        cat: "intervalo",
        q: "‚ÄúSe eu n√£o fizer o intervalo completo, posso compensar depois?‚Äù",
        a: `
          <p><b>Resposta:</b> N√£o. O intervalo deve ser cumprido conforme jornada definida. A frui√ß√£o parcial/indevida pode ensejar apura√ß√£o de descumprimento do normativo e da CLT.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Observa√ß√µes importantes (p√°g. 9)", file:"Manual.pdf", page:9 },
        ]
      },
      {
        cat: "tolerancia",
        q: "‚ÄúA toler√¢ncia de 15 minutos me permite entrar mais tarde ou sair mais cedo todo dia?‚Äù",
        a: `
          <p><b>Resposta:</b> N√£o. A toler√¢ncia existe para evitar valida√ß√µes pontuais no sistema. Em nenhuma hip√≥tese exime o empregado de cumprir a jornada cadastrada, nem autoriza uso habitual para acumular saldo/minutos indevidos.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Toler√¢ncia 15min / CLT art. 58 ¬ß1¬∫ (p√°g. 7)", file:"Manual.pdf", page:7 },
        ]
      },
      {
        cat: "tolerancia",
        q: "‚ÄúSe o sistema aceita o registro, ent√£o est√° permitido, certo?‚Äù",
        a: `
          <p><b>Resposta:</b> N√£o. O sistema registra; ele n√£o autoriza condutas irregulares. O uso reiterado e estrat√©gico da toler√¢ncia pode ser tratado como desconformidade e conduta indevida.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Toler√¢ncia / responsabiliza√ß√£o (p√°g. 7)", file:"Manual.pdf", page:7 },
        ]
      },
      {
        cat: "ponto",
        q: "‚ÄúSe eu esquecer de bater ponto, como fa√ßo? Posso pedir para algu√©m registrar por mim?‚Äù",
        a: `
          <p><b>Resposta:</b> Deve ser criado um ajuste de ponto no dia √∫til seguinte, informando o hor√°rio praticado e comunicando ao gestor. √â vedado registro por terceiros (falta grave).</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Ajuste de ponto / veda√ß√£o (p√°g. 6‚Äì7)", file:"Manual.pdf", page:6 },
          { doc:"Manual", label:"Manual ‚Äî Veda√ß√£o: ponto por terceiros (p√°g. 4)", file:"Manual.pdf", page:4 },
        ]
      },
      {
        cat: "ponto",
        q: "‚ÄúQuantas vezes eu devo bater ponto por dia?‚Äù",
        a: `
          <p><b>Resposta:</b> Depende da jornada. Para jornada acima de 4h e escalas 12x36, normalmente: entrada, in√≠cio do intervalo, volta do intervalo e sa√≠da. H√° regras espec√≠ficas para 24x72.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Quantidade de marca√ß√µes (p√°g. 6)", file:"Manual.pdf", page:6 },
        ]
      },
      {
        cat: "conduta",
        q: "‚ÄúQuais as consequ√™ncias de descumprir jornada/intervalo/toler√¢ncia de forma repetida?‚Äù",
        a: `
          <p><b>Resposta:</b> O gestor deve orientar e notificar (verbal e por escrito em reincid√™ncia). Casos reincidentes podem ser encaminhados ao Comit√™ de Conduta, Integridade e √âtica (CCE), conforme normativos internos.</p>
        `,
        bases: [
          { doc:"Manual", label:"Manual ‚Äî Responsabilidades do gestor (p√°g. 5)", file:"Manual.pdf", page:5 },
          { doc:"Manual", label:"Manual ‚Äî Veda√ß√µes/descumprimentos reiterados (p√°g. 4)", file:"Manual.pdf", page:4 },
        ]
      }
    ];

    function norm(s){
      return (s||"").toLowerCase()
        .normalize("NFD").replace(/\p{Diacritic}/gu,"")
        .trim();
    }

    // Render
    const list = document.getElementById("faqList");
    const empty = document.getElementById("faqEmpty");
    const q = document.getElementById("faqSearch");
    const tagWrap = document.getElementById("faqTags");
    const active = new Set(["jornada","intervalo","tolerancia","ponto","conduta"]);

    function render(items){
      list.innerHTML = items.map(it => {
        const bases = (it.bases||[]).map(b => {
          // PDFs na raiz do projeto (mesmo n√≠vel do index.html). O iframe est√° em /bh_tolerancia/
          // ent√£o subimos 1 n√≠vel.
          const href = `../${b.file}#page=${b.page}`;
          return `<a class="base-pill" href="${href}" target="_blank" rel="noopener noreferrer" title="Abrir PDF na p√°gina ${b.page}">${b.label}</a>`;
        }).join("");

        const tagLabel = it.cat === "ponto" ? "Registro/Ponto" : (it.cat.charAt(0).toUpperCase()+it.cat.slice(1));
        return `
          <details class="faq-item" data-cat="${it.cat}">
            <summary>
              <div class="faq-q">${it.q}</div>
              <div class="faq-meta">
                <span class="tag-mini">${tagLabel}</span>
              </div>
            </summary>
            <div class="faq-a">
              ${it.a}
              <div class="base-pills">${bases}</div>
            </div>
          </details>
        `;
      }).join("");
    }

    function apply(){
      const term = norm(q.value);
      let shown = 0;

      const filtered = FAQ.filter(it => {
        const okCat = active.has(it.cat);
        if (!okCat) return false;
        if (!term) return true;
        const hay = norm(it.q + " " + it.a + " " + (it.bases||[]).map(b=>b.label).join(" "));
        return hay.includes(term);
      });

      render(filtered);
      shown = filtered.length;
      empty.style.display = shown ? "none" : "block";
    }

    // Pills toggle (mesma UX do leitor)
    tagWrap.addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-filter]");
      if (!btn) return;
      const key = btn.getAttribute("data-filter");
      const isOn = btn.getAttribute("aria-pressed") === "true";
      btn.setAttribute("aria-pressed", String(!isOn));

      if (isOn) active.delete(key);
      else active.add(key);

      // visual: quando desligado, remove "pill--action"
      if (btn.getAttribute("aria-pressed") === "true") btn.classList.add("pill--action");
      else btn.classList.remove("pill--action");

      apply();
    });

    q.addEventListener("input", apply);

    // init
    apply();
  </script>
</body>
</html>
